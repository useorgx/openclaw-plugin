import type { LiveData } from '@/types';

export const createMockData = (): LiveData => {
  const now = new Date();
  const minusMinutes = (m: number) =>
    new Date(now.getTime() - m * 60 * 1000).toISOString();

  return {
    connection: 'connected',
    lastActivity: '2m ago',
    lastSnapshotAt: now.toISOString(),
    sessions: {
      groups: [
        { id: 'init-1', label: 'Q4 Feature Ship', status: 'active' },
        { id: 'init-2', label: 'Black Friday Email', status: 'active' },
      ],
      edges: [
        { parentId: 'run-1', childId: 'run-2' },
        { parentId: 'run-1', childId: 'run-3' },
      ],
      nodes: [
        {
          id: 'run-1',
          parentId: null,
          runId: 'run-1',
          title: 'Q4 Feature Ship â€“ Planning',
          agentId: 'eli',
          agentName: 'Eli',
          status: 'running',
          progress: 45,
          initiativeId: 'init-1',
          workstreamId: null,
          groupId: 'init-1',
          groupLabel: 'Q4 Feature Ship',
          startedAt: minusMinutes(120),
          updatedAt: minusMinutes(2),
          lastEventAt: minusMinutes(2),
          lastEventSummary: 'Delegated work to design and data agents.',
          blockers: [],
        },
        {
          id: 'run-2',
          parentId: 'run-1',
          runId: 'run-2',
          title: 'Dashboard UI pass',
          agentId: 'dana',
          agentName: 'Dana',
          status: 'running',
          progress: 70,
          initiativeId: 'init-1',
          workstreamId: 'ws-4',
          groupId: 'init-1',
          groupLabel: 'Q4 Feature Ship',
          startedAt: minusMinutes(80),
          updatedAt: minusMinutes(5),
          lastEventAt: minusMinutes(5),
          lastEventSummary: 'Drafted handoff for approval.',
          blockers: ['Approval pending'],
        },
        {
          id: 'run-3',
          parentId: 'run-1',
          runId: 'run-3',
          title: 'Usage tracking instrumentation',
          agentId: 'pace',
          agentName: 'Pace',
          status: 'queued',
          progress: 0,
          initiativeId: 'init-1',
          workstreamId: 'ws-5',
          groupId: 'init-1',
          groupLabel: 'Q4 Feature Ship',
          startedAt: minusMinutes(30),
          updatedAt: minusMinutes(12),
          lastEventAt: minusMinutes(12),
          lastEventSummary: 'Waiting for data pipeline access.',
          blockers: ['Access to events table'],
        },
        {
          id: 'run-4',
          parentId: null,
          runId: 'run-4',
          title: 'Black Friday Email Campaign',
          agentId: 'mark',
          agentName: 'Mark',
          status: 'running',
          progress: 55,
          initiativeId: 'init-2',
          workstreamId: null,
          groupId: 'init-2',
          groupLabel: 'Black Friday Email',
          startedAt: minusMinutes(90),
          updatedAt: minusMinutes(8),
          lastEventAt: minusMinutes(8),
          lastEventSummary: 'Drafted subject line variants.',
          blockers: [],
        },
      ],
    },
    activity: [
      {
        id: 'activity-1',
        type: 'decision_requested',
        title: 'Decision requested',
        description: 'Approve dashboard UI layout for Q4 Feature Ship.',
        agentId: 'dana',
        agentName: 'Dana',
        runId: 'run-2',
        initiativeId: 'init-1',
        timestamp: minusMinutes(2),
      },
      {
        id: 'activity-2',
        type: 'artifact_created',
        title: 'Artifact created: Subject line variants',
        description: 'Drafted 3 subject line variants for approval.',
        agentId: 'mark',
        agentName: 'Mark',
        runId: 'run-4',
        initiativeId: 'init-2',
        timestamp: minusMinutes(8),
      },
      {
        id: 'activity-3',
        type: 'delegation',
        title: 'Task delegated',
        description: 'Spin up data agent for instrumentation plan.',
        agentId: 'eli',
        agentName: 'Eli',
        runId: 'run-1',
        initiativeId: 'init-1',
        timestamp: minusMinutes(18),
      },
    ],
    handoffs: [
      {
        id: 'handoff-1',
        title: 'Dashboard UI approval',
        status: 'created',
        priority: 'high',
        summary: 'Need approval on dashboard UI layout and component hierarchy.',
        currentActorType: 'user',
        currentActorId: 'me',
        createdAt: minusMinutes(12),
        updatedAt: minusMinutes(2),
        events: [
          {
            id: 'handoff-event-1',
            handoffId: 'handoff-1',
            eventType: 'created',
            actorType: 'agent',
            actorId: 'dana',
            payload: { summary: 'Draft layout ready for review.' },
            createdAt: minusMinutes(12),
          },
        ],
      },
    ],
    decisions: [
      {
        id: 'decision-1',
        title: 'Approve dashboard copy update',
        context: 'Marketing requested a copy refresh before final launch. Confirm wording changes.',
        status: 'pending',
        agentName: 'Mark',
        requestedAt: minusMinutes(22),
        updatedAt: minusMinutes(2),
        waitingMinutes: 22,
      },
    ],
    outbox: {
      pendingTotal: 0,
      pendingByQueue: {},
      oldestEventAt: null,
      newestEventAt: null,
      replayStatus: 'idle',
      lastReplayAttemptAt: null,
      lastReplaySuccessAt: null,
      lastReplayFailureAt: null,
      lastReplayError: null,
    },
  };
};
